
#!/bin/bash

# PCDC Practice Enumeration Generator test v0.1

head -n 1 main | xxd -ps -r > temp1.txt

echo "PCDC Practice Enumeration Generator test v0.1"
sleep 1
echo "Beginning set up process..."
sleep 1

echo "Setting up, step 1 out of 7"
InterfaceAddress=$(( $RANDOM % 70 + 20 ))
apt-get install bridge-utils -y > /dev/null 2>&1
brctl addbr PCDC0
ip address add 10.0.0.${InterfaceAddress}/255.255.255.0 dev PCDC0
ip link set dev PCDC0 up
echo "The IP Address for this machine was: 10.0.0.${InterfaceAddress}" >> CheatSheet.txt
AccountAmount=$(( $RANDOM % 8 + 3 ))
AdminAmount=$(( $RANDOM % $AccountAmount + 1 ))
echo "There were $AccountAmount users on this machine" >> CheatSheet.txt
echo "There were $AdminAmount Admins on this machine" >> CheatSheet.txt
for i in $( seq 1 $AccountAmount)
do
    RandomNumber1=$(( $RANDOM % 50 + 1 ))
    AccountToAdd=$(sed -n ${RandomNumber1}p temp1.txt)
    echo $AccountToAdd | xxd -ps -c 200 | tr -d '\n' >> EncryptTemp.txt
    useradd -m -p "saF6zJXSlFRAk" "$AccountToAdd" > /dev/null 2>&1
done
echo "Setting up, step 2 out of 7"
DecryptedUsers=$(cat EncryptTemp.txt | xxd -ps -r) 
echo $DecryptedUsers >> DecryptTemp.txt
tr ' ' '\n' < DecryptTemp.txt >> DecryptTemp2.txt
echo "Setting up, step 3 out of 7"
for i in $( seq 1 $AdminAmount)
do
    Random2=$(( $RANDOM % $AccountAmount + 0 ))
    AdminToAdd=$(sed -n ${Random2}p DecryptTemp2.txt)
    usermod -a -G sudo "$AdminToAdd" 
done
rm DecryptTemp.txt
rm DecryptTemp2.txt
rm temp1.txt
echo "Setting up, step 4 out of 7"
installable=( "apt-get install apache2 -y" "apt-get install nmap -y" "apt-get install mysql-server -y" "apt-get install wireshark -y" )
i2=$(( RANDOM % ${#installable[@]} ))
${installable[i2]} > /dev/null 2>&1
echo "The following was ran to install programs: " >> CheatSheet.txt
i3=$(( RANDOM % ${#installable[@]} ))
${installable[i3]} > /dev/null 2>&1
echo ${installable[i2]} >> CheatSheet.txt
echo ${installable[i3]} >> CheatSheet.txt
echo "Setting up, step 5 out of 7"
oktest=$[ RANDOM ]
creditdata="564953412c20343931363038373133303436373134372c2031302f323032362c203531390a564953412c20343535363733363135393436323734352c20362f323033302c203533330a564953412c20343535363539333039393834323632312c20362f323032382c203138320a564953412c20343731363630313830303535343139302c20332f323032382c203338360a564953412c20343535363139353538353434363236312c20332f323032342c203635340a564953412c20343932393938333838363736353437352c20392f323032332c203630340a564953412c20343438353032303137353130363133312c20392f323032362c203635330a564953412c20343931363531313031303630383837362c20312f323032342c203233340a564953412c20343931363734313737343334343039312c2031322f323032332c203438370a564953412c20343932393431383937383139393139322c20352f323032342c203738380a564953412c20343533323134303235363432383631392c2031302f323032332c203134380a564953412c20343137323839383837383635303635352c20372f323032372c203330370a564953412c20343032343030373134343438343031302c2031312f323032342c203835390a564953412c20343438353630373238333433313739372c20362f323032382c203831310a564953412c20343535363034333839343032363532352c20382f323032362c203639310a564953412c20343931363530393139343839343435322c20372f323032382c203132360a564953412c20343533393632303934353136373038352c20322f323032372c203137380a564953412c20343032343030373130343734363034342c2031302f323032342c203434390a564953412c20343731363938343436393431363730372c20322f323032372c203139340a564953412c20343032343030373131343537303833302c2031322f323032392c203337350a564953412c20343931363831303137353233333533322c2031302f323032352c203131330a564953412c20343731363037363532363032383131302c20382f323033302c203238380a564953412c20343032343030373134343431383139302c20352f323032362c203639390a564953412c20343438353033363731323338353837312c20322f323032382c203634350a564953412c20343438353732363830383936383431322c2031302f323032362c203636300a564953412c20343533323532393539363934303433342c20392f323032362c203839380a564953412c20343236393537353431383536323030342c2031302f323032382c203936330a564953412c20343032343030373139373430323433302c20312f323032392c203837360a564953412c20343533393636363539363238343239392c20372f323032382c203638370a564953412c20343731363838373133353032373835392c20392f323032372c203130310a564953412c20343533393331393939353937313132302c2031302f323032362c203837360a564953412c20343533393838313736393633313734332c2031312f323032392c203835390a564953412c20343732383339353238373139363836362c20322f323032372c203835340a564953412c20343438353435383632323830313733322c2031322f323032332c203533380a564953412c20343931363635303034323937323633352c20352f323033302c203831350a564953412c20343931363737393834353939363136382c20342f323032382c203631350a564953412c20343533393530363430393539363432342c20352f323032372c203734320a564953412c20343032343030373132333934363630392c20372f323032372c203234380a564953412c20343034313934313937353039313233302c20322f323032382c203938320a564953412c20343535363439303332343139333734302c2031302f323032382c203238370a564953412c20343533323133303436383337333633382c20372f323032372c203534350a564953412c20343533323639393537373930333738322c20332f323032392c203337380a564953412c20343932393234353930323639353332302c20392f323032372c203332330a564953412c20343533323033363530363231333836302c20312f323032382c203937340a564953412c20343931363734373535353233373331332c20392f323032382c203130340a564953412c20343438353834393833333138363133392c20372f323032362c203534350a564953412c20343032343030373135343338353237312c20392f323032362c203630380a564953412c20343932393730323237333437303633342c2031312f323032352c203534310a564953412c20343731363835323634323235363438322c20332f323033302c203339390a564953412c20343535363435383930373933333431302c20362f323032342c203539360a"

if [ $(($oktest%2)) -eq 0 ]
then
    
    echo $creditdata | xxd -ps -r > /var/www/html/dump.csv > /dev/null 2>&1
    echo "There was a datadump containing PII on this machine " >> CheatSheet.txt
else
    
    echo "There were no datadumps on this machine " >> CheatSheet.txt
    
fi


echo "Setting up, step 6 out of 7"

echo "Finished! Begin enumerating!"

